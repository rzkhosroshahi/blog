<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.131b48b25a50eff60b34.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.19.41"/><title data-react-helmet="true">normal کردن Data با استفاده از متد Reduce</title><meta data-react-helmet="true" name="description" content="اگر تا بحال سرو کارتون با redux یا هر state management دیگه‌ای افتاده باشه. حتما از normal کردن دیتا چیزی به گوش‌تون خورده."/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="normal کردن Data با استفاده از متد Reduce"/><meta data-react-helmet="true" property="article:published_time" content="2018-02-15"/><meta data-react-helmet="true" property="og:description" content="اگر تا بحال سرو کارتون با redux یا هر state management دیگه‌ای افتاده باشه. حتما از normal کردن دیتا چیزی به گوش‌تون خورده."/><meta data-react-helmet="true" property="og:image" content="/static/b375597f67e6a53a658bab64975be468/8af9c/reduce.png"/><meta data-react-helmet="true" name="robots" content="index,follow"/><meta data-react-helmet="true" name="revisit-after" content="1 days"/><meta data-react-helmet="true" name="twitter:description" content="اگر تا بحال سرو کارتون با redux یا هر state management دیگه‌ای افتاده باشه. حتما از normal کردن دیتا چیزی به گوش‌تون خورده."/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@rzkhosroshahi"/><meta data-react-helmet="true" name="twitter:title" content="normal کردن Data با استفاده از متد Reduce"/><meta data-react-helmet="true" name="twitter:description" content="اگر تا بحال سرو کارتون با redux یا هر state management دیگه‌ای افتاده باشه. حتما از normal کردن دیتا چیزی به گوش‌تون خورده."/><meta data-react-helmet="true" name="twitter:image:src" content="/static/b375597f67e6a53a658bab64975be468/8af9c/reduce.png"/><style data-styled="gOOpxW loAISM iVgrpS bRaSGh fDzIxt kaPmmu cnwWUZ cOWvYW dboTck cLfWdx hbjqD hHJhMY gGTSXB hHRshF dmsSNq dZczJr" data-styled-version="4.4.1">
/* sc-component-id: sc-global-116296397 */
@font-face{font-family:'Sahel';src:url(/static/Sahel-Bold-a72b7c56363409e64fff2a4e214da81c.eot);src:url(/static/Sahel-Bold-a72b7c56363409e64fff2a4e214da81c.eot?#iefix) format('eot'), url(/static/Sahel-Bold-adaac7807ddd42250ef7ad3160355162.woff2) format('woff2'), url(/static/Sahel-Bold-6fb7493f14d669832dee81abb5eefc4a.woff) format('woff'), url(/static/Sahel-Bold-b1bdd6d4f72f92f132641b7072b88703.ttf) format('ttf');font-weight:600;font-style:normal;font-display:swap;} @font-face{font-family:'Sahel';src:url(/static/Sahel-0e76e6a49247dc04227e866155535753.eot);src:url(/static/Sahel-0e76e6a49247dc04227e866155535753.eot?#iefix) format('eot'), url(/static/Sahel-446b610d68351f6df36f459071ff40cb.woff2) format('woff2'), url(/static/Sahel-b385ecfbc50b3081b3a1490a3437acfd.woff) format('woff'), url(/static/Sahel-25836e3d164d3f4a8d05f2c3cdbaf4af.ttf) format('ttf');font-weight:normal;font-style:normal;font-display:swap;} :root{--base-line:1.5rem;} @media (min-width:62.375em){:root{--base-line:1.75rem;}} *{box-sizing:border-box;} html{direction:rtl;} html.ln__helper{background-size:1px var(--base-line);background-image:linear-gradient(rgba(0,188,212,0.23) 1px,transparent 0%,transparent);} html.ln__helper h1,html.ln__helper h2,html.ln__helper h3,html.ln__helper h4{background-color:rgba(255,227,194,0.7);} html,body,h1,h2,h3,h4,p,ul,li,a{margin:0;padding:0;} html{font-family:Sahel,serif;background-color:#fff;-webkit-font-smoothing:antialiased;line-height:var(--base-line);-webkit-transition:background-color 0.5s ease;transition:background-color 0.5s ease;} .main_width{width:90%;margin:0 auto;} @media (min-width:62.375em){.main_width{width:70%;}} @media (min-width:75em){.main_width{width:50%;}}
/* sc-component-id: nav__Ul-sc-18rd9k9-0 */
.loAISM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style:none;line-height:var(--base-line);} .loAISM li a{-webkit-text-decoration:none;text-decoration:none;padding:0.75rem 0 0.75rem 1rem;-webkit-transition:border-bottom 0.5s ease;transition:border-bottom 0.5s ease;color:#000;} @media (min-width:62.375em){.loAISM li a{border-bottom:0.1rem solid #f5f5f5;}} .loAISM li:hover a,.loAISM li:focus a{color:#42A5F5;border-color:#42A5F5;}
/* sc-component-id: switchTheme__Slide-sc-5biwed-0 */
.kaPmmu{width:2.5rem;height:1.5rem;background:#e0e0e0;border-radius:0.7rem;} .kaPmmu:after{position:relative;display:block;margin-right:1.2rem;top:0.25rem;content:" ";background:#fff;width:1rem;height:1rem;border-radius:50%;-webkit-transition:margin-right 0.4s cubic-bezier(0.175,0.885,0.32,1.275);transition:margin-right 0.4s cubic-bezier(0.175,0.885,0.32,1.275);}
/* sc-component-id: switchTheme__Input-sc-5biwed-1 */
.fDzIxt{display:none;} .fDzIxt:checked + .slide:after{margin-right:0.4rem;} .fDzIxt:checked + .slide{background:#039be5;}
/* sc-component-id: switchTheme__Label-sc-5biwed-2 */
.bRaSGh{background-color:transparent;width:2.4rem;height:1.4rem;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}
/* sc-component-id: social__Ul-sc-1difq29-0 */
.cnwWUZ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style:none;}
/* sc-component-id: social__Img-sc-1difq29-1 */
.dboTck{width:1.5rem;-webkit-filter:invert(48%) sepia(0%) saturate(13%) hue-rotate(176deg) brightness(93%) contrast(84%);filter:invert(48%) sepia(0%) saturate(13%) hue-rotate(176deg) brightness(93%) contrast(84%);}
/* sc-component-id: social__Li-sc-1difq29-2 */
.cOWvYW{margin-right:0.5rem;} .cOWvYW:hover .social__Img-sc-1difq29-1{-webkit-filter:invert(66%) sepia(34%) saturate(5885%) hue-rotate(183deg) brightness(101%) contrast(92%);filter:invert(66%) sepia(34%) saturate(5885%) hue-rotate(183deg) brightness(101%) contrast(92%);}
/* sc-component-id: navInfo__Div-yi0jyy-0 */
.iVgrpS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}
/* sc-component-id: Header__HeaderStyled-sc-12yn8dz-0 */
.gOOpxW{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:calc(1 * var(--base-line));height:var(--base-line);}
/* sc-component-id: H1-sc-9f56xm-0 */
.hbjqD{font-size:1.618rem;line-height:calc(2 * var(--base-line));color:#000;} @media (min-width:62.375em){.hbjqD{font-size:2.618rem;line-height:calc(3 * var(--base-line));}}
/* sc-component-id: PostHtml-he9uhj-0 */
.hHJhMY a{color:#757575;border-bottom:0.0625rem solid #e0e0e0;-webkit-text-decoration:none;text-decoration:none;} .hHJhMY a:hover,.hHJhMY a:focus{color:#1976D2;border-color:#1976D2;} .hHJhMY p,.hHJhMY h1,.hHJhMY h2,.hHJhMY h3,.hHJhMY h4{color:#000;} .hHJhMY p{margin:var(--base-line) 0;} .hHJhMY h2{margin:var(--base-line) 0;line-height:calc(2 * var(--base-line));} .hHJhMY h3{margin:var(--base-line) 0;} .hHJhMY s .gatsby-highlight{direction:ltr !important;} .hHJhMY s .gatsby-highlight pre{margin:0;border-radius:0.2rem;max-height:336px;} .hHJhMY .en{direction:ltr !important;display:inline-block;} .hHJhMY mark{background-color:#F5F5F5;padding:0.1rem 0.3rem;border-radius:0.1rem;color:#212121;} .hHJhMY ul{list-style-type:arabic-indic;padding-right:2.618rem;margin:var(--base-line) 0;}
/* sc-component-id: PostNavigate__Div-tmeisd-0 */
.gGTSXB{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:calc(1 * var(--base-line));margin:var(--base-line) 0;}
/* sc-component-id: PostNavigate__Next-tmeisd-1 */
.dZczJr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;min-width:50%;} @media (min-width:62.375em){.dZczJr{min-width:50%;}}
/* sc-component-id: PostNavigate__Prev-tmeisd-2 */
.hHRshF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;min-width:50%;}
/* sc-component-id: PostNavigate__StyledLink-tmeisd-3 */
.dmsSNq{-webkit-text-decoration:none;text-decoration:none;color:#757575;border-bottom:0.0625rem solid #e0e0e0;} .dmsSNq:hover,.dmsSNq:focus{color:#1976D2;border-color:#1976D2;}
/* sc-component-id: blogPost__TemplateDiv-x0dikm-0 */
.cLfWdx{margin-top:calc(3 * var(--base-line));} .cLfWdx .post__content{margin-top:calc(1 * var(--base-line));}</style><link rel="icon" href="/icons/icon-48x48.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#42A5F5"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=136c133a82b95406ff91645d4085f5e4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=136c133a82b95406ff91645d4085f5e4"/><link as="script" rel="preload" href="/webpack-runtime-d7522130f5ceda86550f.js"/><link as="script" rel="preload" href="/styles-b0a2d349d7af1a37ea21.js"/><link as="script" rel="preload" href="/app-99596dfb26fb2ce831a8.js"/><link as="script" rel="preload" href="/commons-981fb16a491cd0f2bc2c.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-1fb62e4683848c49529e.js"/><link as="fetch" rel="preload" href="/page-data/normalize-data-by-reduce/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__HeaderStyled-sc-12yn8dz-0 gOOpxW main_width"><nav><ul class="nav__Ul-sc-18rd9k9-0 loAISM"><li><a href="/">صفحه اول</a></li><li><a href="/about">درباره من</a></li></ul></nav><div class="navInfo__Div-yi0jyy-0 iVgrpS"><label class="switchTheme__Label-sc-5biwed-2 bRaSGh"><input type="checkbox" class="switchTheme__Input-sc-5biwed-1 fDzIxt checkbox"/><div class="switchTheme__Slide-sc-5biwed-0 kaPmmu slide"></div></label><ul class="social__Ul-sc-1difq29-0 cnwWUZ"><li class="social__Li-sc-1difq29-2 cOWvYW"><a href="https://twitter.com/rzkhosroshahi"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLXR3aXR0ZXIiPjxwYXRoIGQ9Ik0yMyAzYTEwLjkgMTAuOSAwIDAgMS0zLjE0IDEuNTMgNC40OCA0LjQ4IDAgMCAwLTcuODYgM3YxQTEwLjY2IDEwLjY2IDAgMCAxIDMgNHMtNCA5IDUgMTNhMTEuNjQgMTEuNjQgMCAwIDEtNyAyYzkgNSAyMCAwIDIwLTExLjVhNC41IDQuNSAwIDAgMC0uMDgtLjgzQTcuNzIgNy43MiAwIDAgMCAyMyAzeiI+PC9wYXRoPjwvc3ZnPgo=" alt="" target="_blank" class="social__Img-sc-1difq29-1 dboTck"/></a></li><li class="social__Li-sc-1difq29-2 cOWvYW"><a href="https://github.com/rzkhosroshahi"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM3NTc1NzUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWdpdGh1YiI+PHBhdGggZD0iTTkgMTljLTUgMS41LTUtMi41LTctM20xNCA2di0zLjg3YTMuMzcgMy4zNyAwIDAgMC0uOTQtMi42MWMzLjE0LS4zNSA2LjQ0LTEuNTQgNi40NC03QTUuNDQgNS40NCAwIDAgMCAyMCA0Ljc3IDUuMDcgNS4wNyAwIDAgMCAxOS45MSAxUzE4LjczLjY1IDE2IDIuNDhhMTMuMzggMTMuMzggMCAwIDAtNyAwQzYuMjcuNjUgNS4wOSAxIDUuMDkgMUE1LjA3IDUuMDcgMCAwIDAgNSA0Ljc3YTUuNDQgNS40NCAwIDAgMC0xLjUgMy43OGMwIDUuNDIgMy4zIDYuNjEgNi40NCA3QTMuMzcgMy4zNyAwIDAgMCA5IDE4LjEzVjIyIj48L3BhdGg+PC9zdmc+Cg==" alt="" target="_blank" class="social__Img-sc-1difq29-1 dboTck"/></a></li></ul></div></header><div class="children main_width"><div class="blogPost__TemplateDiv-x0dikm-0 cLfWdx"><h1 class="H1-sc-9f56xm-0 hbjqD">normal کردن Data با استفاده از متد Reduce</h1><div class="post__content"><div class="PostHtml-he9uhj-0 hHJhMY"><p>اگر تا بحال سرو کارتون با redux یا هر state management دیگه‌ای افتاده باشه. حتما از normal کردن دیتا چیزی به گوش‌تون خورده. به طور کلی normal بودن یک data به این معنی هستش که میزان تو رفتگی داده‌ها انقدر نباشه که کار ما رو برای بروزرسانی، حذف و تغییر و حتی دسترسی به اون داد‌ه‌ها دچار مشکل کنه. البته که پکیج‌هایی هستند که این امکان رو به ما میدن که بتونیم دیتا بدیم و از طرفی normal شده تحویل بگیریم. اما اینجا من قصد دارم از با استفاده از متد <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">Reduce</a> برای normal کردن دیتا استفاده کنم.</p>
<!-- excerpt -->
<p>از اینجا به بعد مقاله به جای واژه normal از واژه نرمال استفاده میکنم.</p>
<h2>دیتای غیر نرمال چه شکلیه</h2>
<p>به آبجکت پایینی نگاه کنید. برای اینکه بتونیم از فهرست غذا‌ها، فهرست غذا‌های خوشمزه رو داشته باشیم طبیعتا باید یک بار داخل آرایه category، چرخ بزنیم و هر بار هم چک کنیم فلان آیدی رو دیدی بهم خبر بده. این تازه بخش آسونه ماجراست. تصور کنید که بخوایم حالا از داخل آرایه food براساس categoryId لیست غذاهای اون catogory خاص رو داشته باشیم. میدونم سخته. به آپدیت کردنش که اصلا فکر نکنید :)</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  food<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      categoryId<span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span>
      foods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ghorme, gheimeh, fesenjoon"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      categoryId<span class="token operator">:</span> <span class="token string">"345"</span><span class="token punctuation">,</span>
      fruits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"albaloo, anar, tootfarangi"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  category<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">"delicious"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">"345"</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">"fruits"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>قراره چیکار کنیم تا نرمال بشه؟ خب یه نگاهی به آبجکت پایینی بیندازید.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> food <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"123"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    categoryId<span class="token operator">:</span> <span class="token string">"123"</span><span class="token punctuation">,</span>
    foods<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"ghorme, gheimeh, fesenjoon"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"345"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    categoryId<span class="token operator">:</span> <span class="token string">"345"</span><span class="token punctuation">,</span>
    fruits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"albaloo, anar, tootfarangi"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>همونطوری که میبینید الان ما آبجکتی به اسم food داریم که به راحتی میتونیم با چیزی شبیه به این <mark class="en"> foo['123'] </mark> تمام غذاهایی که categoryId اونها 123 هست رو ببینیم، تغییر بدیم و حتی حذف کنیم. تصورش رو بکنید اگه دیتایی که از سرور میگیریم رو به این شکل داخل store ذخیره کنیم چقدر کار ما ساده میشه.</p>
<h2>Reduce چیه و چه شکلی کار میکنه؟</h2>
<p>خب Reduce یکی از متدهاییه که آرایه‌های جاوااسکریپت به شما میدن. اما در مورد چطور کار کردنش پیشنهادم دیدن این <a href="https://eloquentjavascript.net/05_higher_order.html#h_fx3e34kT/k">لینک</a> از کتاب eloquent هست. اینجا اومده یکبار Reduce رو به شکل تابع پیاده کرده و با خوندن این قطعه کد میتونید متوجه بشید که این تابع چطور کار میکنه.</p>
<p>اما به صورت کلی اگه reduce یک تابعی باشه با دو آرگومان، آرگومان ابتدایی یک تابع به شکل callback هست و آرگومان دوم تعیین کننده نقطه آغاز تابع reduce. این نقطه آغازین تا انتهای چرخش داخل آرایه با آرگومان اول تابع callback جایگزین (replace) میشه، البته اینکه چطور و به چه شکل این اتفاق بی‌افته رو ما با عملی که داخل callback مینویسیم تعیین میکنیم. برای نمونه میتونیم آرایه‌ای شامل اعداد یک تا ده داشته باشیم و جمع این اعداد رو به شکل زیر به راحتی به دست بیاریم.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> multi <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>multi<span class="token punctuation">)</span> <span class="token comment">// 55</span></code></pre></div>
<h2>وقت نرمال کردنه</h2>
<p>حالا قراره که یه آبجکت خالی رو با کلید‌‌‌های آیدی هر کدوم از آبجکت‌های داخل آرایه category پر کنیم. از آبجکت data که کمی پیش بالاتر تعریف کردیم، استفاده می‌کنیم. به قطعه کد زیر توجه کنید:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> category <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">"category"</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> normalCategory <span class="token operator">=</span> category<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> oldData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  data<span class="token punctuation">[</span>oldData<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> oldData
  <span class="token keyword">return</span> data
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>normalCategory<span class="token punctuation">)</span></code></pre></div>
<p>اگر به قطعه کد بالا توجه کنید میبنید که آرگومان data هر بار با کلید آیدی oldData پر میشه و در نهایت data‌ی تازه، که نرمال هم شده return میشه. اما اگه قرار باشه ما همین کارو با آرایه food بکنیم و اینبار براساس categoryId نه براساس id، اونموقع باید چه کار کنیم؟ خب من برای حل این مشکل کار نرمال کردن رو به تابعی سپردم که یک آرایه میگیره و در صورت متغیر بودن کلیدی که قراره دیتا براساس اون نرمال بشه آرگومان دومی میتونه بگیره تا به واسطه اون جایگزین کلید پیشفرض Id بشه.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">normalizeDependOn</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> key<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> oldData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    data<span class="token punctuation">[</span>oldData<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> oldData
    <span class="token keyword">return</span> data
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>حرف آخر</h2>
<p>فارغ از اینکه کار نرمال کردن data رو با چه ابزاری انجام بدید، بدیهیه که این اتفاق کار شما رو برای عملیات روی داده‌ها بسیار ساده میکنه.
اما خب برای من بشخصه تجربه‌ی جالبی هست که ببینم خیلی از ابزار‌ها چطور کارمیکنن یکی از اونها هم نرمالیزر بود که بعد از کند و کاو زیاد متوجه شدم میشه اینکارو با reduce انجامش داد. به همین جهت سعی کردم یاد گرفته‌های خودم رو با شما به اشتراک بگذارم. امیدوارم که مفید بوده باشه.
قطعه کدی که دیدین از <a href="https://gist.github.com/rzkhosroshahi/f0bdf66b284630213d93575cea017099">اینجا</a> قابل دریافته.</p></div><div class="PostNavigate__Div-tmeisd-0 gGTSXB PostNavigate"><div class="PostNavigate__Prev-tmeisd-2 hHRshF"><a class="PostNavigate__StyledLink-tmeisd-3 dmsSNq" href="/react-method-as-arguments-for-children">پست قبلی</a></div><div class="PostNavigate__Next-tmeisd-1 dZczJr"><a class="PostNavigate__StyledLink-tmeisd-3 dmsSNq" href="/summarize-ydj-scope-closure">پست بعدی</a></div></div><div id="disqus_thread"></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/normalize-data-by-reduce";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-99596dfb26fb2ce831a8.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-49ac284587dff2030b81.js"],"component---src-templates-all-tags-index-js":["/component---src-templates-all-tags-index-js-2f3d8a4bf8450319c953.js"],"component---src-templates-single-tags-index-js":["/component---src-templates-single-tags-index-js-c0c3ae62e2bbfaa350d0.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-1fb62e4683848c49529e.js"],"component---src-templates-about-js":["/component---src-templates-about-js-c78f8112e89010d5ac4f.js"],"component---src-pages-index-js":["/component---src-pages-index-js-84a89dbf0d6b86955237.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-1fb62e4683848c49529e.js" async=""></script><script src="/commons-981fb16a491cd0f2bc2c.js" async=""></script><script src="/app-99596dfb26fb2ce831a8.js" async=""></script><script src="/styles-b0a2d349d7af1a37ea21.js" async=""></script><script src="/webpack-runtime-d7522130f5ceda86550f.js" async=""></script></body></html>